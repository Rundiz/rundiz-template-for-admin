{"version":3,"sources":["components/rdta-dialog.js"],"names":["RDTADialog","activateDialog","selector","options","thisClass","this","dialogOrModalElement","document","querySelector","classList","contains","body","add","tabIndex","focusDialog","setTimeout","focus","event","Event","dispatchEvent","listenOnCloseButton","listenOnClickOutsideClose","static","addEventListener","currentTarget","activeElement","dataset","toggle","stopPropagation","targetDialog","target","listenOnEscapeKeyPressClose","modalElement","clickOutsideNotClose","handler","click","removeEventListener","parentNode","matches","closest","remove","dialogMainElement","key","altKey","ctrlKey","metaKey","shiftKey","escKeyNotClose"],"mappings":";;;;AAKA,MAAAA,WAWAC,eAAAC,EAAAC,GACA,IAAAC,EAAAC,KACAC,EAAAC,SAAAC,cAAAN,GAGAI,GACAA,EAAAG,YACAH,EAAAG,UAAAC,SAAA,UAEAJ,EAAAG,UAAAC,SAAA,oBACAH,SAAAI,KAAAF,UAAAG,IAAA,iBAGAN,EAAAG,UAAAG,IAAA,QACAN,EAAAO,SAAA,OACAV,OAAA,IAAAA,EAAAW,cAEAC,YAAA,WACAT,EAAAU,OAEA,QAGAD,YAAA,WACA,IAAAE,EAAA,IAAAC,MAAA,sBACAZ,EAAAa,cAAAF,EACA,QACAb,EAAAgB,oBAAAlB,GACAE,EAAAiB,0BAAAnB,GAEA,CAMAoB,cACA,IAAAlB,EAAA,IAAAC,KAEAE,SAAAgB,iBAAA,kBAAAN,GACA,GACAA,EAAAO,eACAP,EAAAO,cAAAC,eACAR,EAAAO,cAAAC,cAAAC,SACA,WAAAT,EAAAO,cAAAC,cAAAC,QAAAC,OACA,CACAV,EAAAW,kBACA,IAAAC,EAAAZ,EAAAO,cAAAC,cAAAC,QAAAI,OACAD,GACAzB,EAAAH,eAAA4B,EAEA,CACA,IAEAzB,EAAA2B,6BACA,CASAV,0BAAAQ,GACA,IAAAG,EAAAzB,SAAAC,cAAAqB,GAEAG,GACAA,EAAAN,SACAM,EAAAvB,aAEAuB,EAAAN,QAAAO,sBACA,SAAAD,EAAAN,QAAAO,uBAEAD,EAAAvB,UAAAC,SAAA,oBAGAsB,EAAAT,iBAAA,kBAAAW,EAAAjB,GACAA,EAAAa,SAAAE,GAEAf,EAAAa,OAAAtB,cAAA,6BACAS,EAAAa,OAAAtB,cAAA,2BAAA2B,QACAH,EAAAI,oBAAA,QAAAF,GAGA,GAEA,CAQAd,oBAAAS,GAEAtB,SAAAC,cAAAqB,GAAAN,iBAAA,kBAAAW,EAAAjB,GACA,QAAAa,EAAAb,EAAAa,aAAAzB,KAAAyB,IAAAO,WAEA,GAAAP,EAAAQ,QAAA,4BACA,GAAAR,EAAAS,QAAA,UACAhC,SAAAI,KAAAF,UAAA+B,OAAA,iBACA,IAAAC,EAAAX,EAAAS,QAAA,SACA,GAAAE,EAAA,CACAA,EAAAhC,UAAA+B,OAAA,QACA,IAAAvB,EAAA,IAAAC,MAAA,sBACAuB,EAAAtB,cAAAF,GACAV,SAAAC,cAAAqB,GAAAO,oBAAA,QAAAF,EACA,CACA,CAEA,KACA,CAEA,GACA,CAQAH,8BACAxB,SAAAI,KAAAY,iBAAA,kBAAAN,GAEA,WAAAA,EAAAyB,MACA,IAAAzB,EAAA0B,SACA,IAAA1B,EAAA2B,UACA,IAAA3B,EAAA4B,UACA,IAAA5B,EAAA6B,UACAvC,SAAAC,cAAA,gCAKAD,SAAAC,cAAA,oBACAD,SAAAC,cAAA,mBAAAkB,SACA,SAAAnB,SAAAC,cAAA,mBAAAkB,QAAAqB,gBAEAxC,SAAAC,cAAA,6CACAD,SAAAC,cAAA,2CAAAQ,QACAT,SAAAC,cAAA,2CAAA2B,SAIA5B,SAAAC,cAAA,0BAEAD,SAAAC,cAAA,qCACAD,SAAAC,cAAA,oCAAAkB,SACA,SAAAnB,SAAAC,cAAA,oCAAAkB,QAAAqB,gBAEAxC,SAAAC,cAAA,mDACAD,SAAAC,cAAA,iDAAAQ,QACAT,SAAAC,cAAA,iDAAA2B,SAKA,GACA","file":"rdta-dialog.min.js","sourcesContent":["/*!\n Rundiz template for admin v 2.2.2 \nLicense: MIT\n*/\n/**\n * RDTA dialog\n */\n\n\nclass RDTADialog {\n\n\n    /**\n     * Activate (open) the dialog.\n     * \n     * @param {string} selector\n     * @param {object} options Options:<br>\n     *                  'focusDialog' (bool) Set to `false` to do not focus on dialog. Default is `true`.\n     * @returns {undefined}\n     */\n    activateDialog(selector, options) {\n        let thisClass = this;\n        let dialogOrModalElement = document.querySelector(selector);\n\n        if (\n            dialogOrModalElement &&\n            dialogOrModalElement.classList &&\n            !dialogOrModalElement.classList.contains('show')\n        ) {\n            if (dialogOrModalElement.classList.contains('rd-dialog-modal')) {\n                document.body.classList.add('rd-modal-open');\n            }\n            // show dialog or modal dialog\n            dialogOrModalElement.classList.add('show');\n            dialogOrModalElement.tabIndex = '-1';\n            if (!options || (options && options.focusDialog !== false)) {\n                // focus on dialog/modal.\n                setTimeout(function() {\n                    dialogOrModalElement.focus();\n                    //console.log('changed focus', document.activeElement);\n                }, 301);// 301 is from css transition 0.3s (300) + 1.\n            }\n            // fire event.\n            setTimeout(function() {\n                let event = new Event('rdta.dialog.opened');\n                dialogOrModalElement.dispatchEvent(event);\n            }, 301);// 301 is from css transition 0.3s (300) + 1.\n            thisClass.listenOnCloseButton(selector);\n            thisClass.listenOnClickOutsideClose(selector);\n        }\n    }// activateDialog\n\n\n    /**\n     * Initialize the dialog by listening on button clicked.\n     */\n    static init() {\n        let thisClass = new this();\n\n        document.addEventListener('click', function(event) {\n            if (\n                event.currentTarget &&\n                event.currentTarget.activeElement &&\n                event.currentTarget.activeElement.dataset &&\n                event.currentTarget.activeElement.dataset.toggle === 'dialog'\n            ) {\n                event.stopPropagation();\n                let targetDialog = event.currentTarget.activeElement.dataset.target;\n                if (targetDialog) {\n                    thisClass.activateDialog(targetDialog);\n                }\n            }\n        });\n\n        thisClass.listenOnEscapeKeyPressClose();\n    }// init\n\n\n\n    /**\n     * Listen on click outside dialog and then close if no attribute specified.\n     * \n     * @private\n     */\n    listenOnClickOutsideClose(targetDialog) {\n        let modalElement = document.querySelector(targetDialog);\n        if (\n            modalElement &&\n            modalElement.dataset &&\n            modalElement.classList &&\n            (\n                !modalElement.dataset.clickOutsideNotClose ||\n                modalElement.dataset.clickOutsideNotClose !== 'true'\n            ) &&\n            modalElement.classList.contains('rd-dialog-modal')\n        ) {\n            // if no html attribute `data-click-outside-not-close=\"true\"` and there is modal element then click outside to close the dialog.\n            modalElement.addEventListener('click', function handler(event) {\n                if (event.target === modalElement) {\n                    // if clicking target is on the modal element.\n                    if (event.target.querySelector('[data-dismiss=\"dialog\"]')) {\n                        event.target.querySelector('[data-dismiss=\"dialog\"]').click();\n                        modalElement.removeEventListener('click', handler);\n                    }\n                }\n            });\n        }\n    }// listenOnClickOutsideClose\n\n\n    /**\n     * Listen on close button (`data-dismiss=\"dialog\"`) and close the dialog that contain `show` class.\n     * \n     * @private\n     */\n    listenOnCloseButton(targetDialog) {\n        let thisClass = this;\n        document.querySelector(targetDialog).addEventListener('click', function handler(event) {\n            for (let target= event.target; target && target != this; target = target.parentNode) {\n                // loop parent nodes from the target to the delegation node\n                if (target.matches('[data-dismiss=\"dialog\"]')) {\n                    if (target.closest('.show')) {\n                        document.body.classList.remove('rd-modal-open');\n                        let dialogMainElement = target.closest('.show');\n                        if (dialogMainElement) {\n                            dialogMainElement.classList.remove('show');\n                            let event = new Event('rdta.dialog.closed');\n                            dialogMainElement.dispatchEvent(event);\n                            document.querySelector(targetDialog).removeEventListener('click', handler);\n                        }\n                    }\n\n                    break;\n                }\n            }\n        });\n    }// listenOnCloseButton\n\n\n    /**\n     * Listen on esc key press then close if no attribute specified.\n     * \n     * @private\n     */\n    listenOnEscapeKeyPressClose() {\n        document.body.addEventListener('keyup', function handler(event) {\n            if (\n                event.key === 'Escape' &&\n                event.altKey === false &&\n                event.ctrlKey === false &&\n                event.metaKey === false &&\n                event.shiftKey === false &&\n                !document.querySelector('.rd-alertdialog-modal.show')// make sure that alert dialog is not opened. if opened, close it before close dialog.\n            ) {\n                // if target key press.\n                // close dialog that without modal.\n                if (\n                    document.querySelector('.rd-dialog.show') &&\n                    document.querySelector('.rd-dialog.show').dataset &&\n                    document.querySelector('.rd-dialog.show').dataset.escKeyNotClose !== 'true'\n                ) {\n                    if (document.querySelector('.rd-dialog.show [data-dismiss=\"dialog\"]')) {\n                        document.querySelector('.rd-dialog.show [data-dismiss=\"dialog\"]').focus();\n                        document.querySelector('.rd-dialog.show [data-dismiss=\"dialog\"]').click();\n                    }\n                }\n                // close dialog with modal.\n                if (document.querySelector('.rd-dialog-modal.show')) {\n                    if (\n                        document.querySelector('.rd-dialog-modal.show .rd-dialog') &&\n                        document.querySelector('.rd-dialog-modal.show .rd-dialog').dataset &&\n                        document.querySelector('.rd-dialog-modal.show .rd-dialog').dataset.escKeyNotClose !== 'true'\n                    ) {\n                        if (document.querySelector('.rd-dialog-modal.show [data-dismiss=\"dialog\"]')) {\n                            document.querySelector('.rd-dialog-modal.show [data-dismiss=\"dialog\"]').focus();\n                            document.querySelector('.rd-dialog-modal.show [data-dismiss=\"dialog\"]').click();\n                        }\n                    }\n                }\n            }\n        });\n    }// listenOnEscapeKeyPressClose\n\n\n}"]}